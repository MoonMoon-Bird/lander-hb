;(self.SPZ=self.SPZ||[]).push({n:"spz-dropdown",ev:"0.1",l:!0,t:"v1",v:"1.0",m:0,f:function(t,n){!function(){function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function e(t,n,e){return n in t?Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[n]=e,t}function i(t,n){return(i=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,n){return t.__proto__=n,t})(t,n)}function o(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function r(t){return(r=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var s="spz-dropdown",u={BOTTOM:"bottom",BOTTOM_LEFT:"bottomLeft",BOTTOM_RIGHT:"bottomRight",TOP:"top",TOP_LEFT:"topLeft",TOP_RIGHT:"topRight"},a="bottom",c="top",l="center",f="left",h="right",p="vertical",v="horizontal",d={opacity:1},b={opacity:0},y=function(t){!function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),n&&i(t,n)}(S,t);var n,y,w,m,O=(w=S,m=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,n=r(w);if(m){var e=r(this).constructor;t=Reflect.construct(n,arguments,e)}else t=n.apply(this,arguments);return o(this,t)});function S(t){var n;!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,S),(n=O.call(this,t)).dropdownContainer_=null,n.targetElement_=null,n.placement_=u.BOTTOM_LEFT,n.overlayStyle_={},n.isOpened_=!1,n.isInitEvent_=!1;var e=SPZServices.platformFor(n.win);return n.isIos_=e.isIos(),n.action_=null,n}return n=S,(y=[{key:"isLayoutSupported",value:function(t){return!SPZCore.isLayoutSizeLogic(t)}},{key:"buildCallback",value:function(){var t=this;if(this.element.hasAttribute("placement")){var n=this.element.getAttribute("placement");this.assert(Object.values(u).includes(n),"".concat(s,' "placement" must be one of top, topLeft, topRight, bottom, bottomLeft, or bottomRight.')),this.placement_=n}if(this.element.hasAttribute("overlay-style")){var e=this.element.getAttribute("overlay-style");this.overlayStyle_=this.parseStyle_(e)}this.element.hasAttribute("auto-orientation")&&this.initAutoOrientation_(),this.registerDefaultAction((function(n){return t.open(null==n?void 0:n.caller)}),"open"),this.registerAction("close",(function(){return t.close()})),this.action_=SPZServices.actionServiceForDoc(this.element)}},{key:"initAutoOrientation_",value:function(){var t,n,i=this.element.parentElement.clientWidth,o=parseFloat(this.element.getAttribute(c)||0),r=parseFloat(this.element.getAttribute(f)||0),s=null,u=null;this.element.setAttribute(p,c),this.element.setAttribute(v,f),o>50&&(u=100-o,o=null,this.element.setAttribute(p,a)),r>50&&(s=100-r,r=null,this.element.setAttribute(v,h)),n=Math.max(i*r/100,i*(100-r)/100),SPZCore.Dom.setStyles(this.element,(e(t={},c,"".concat(o,"%")),e(t,a,"".concat(u,"%")),e(t,f,"".concat(r,"%")),e(t,h,"".concat(s,"%")),e(t,"max-width",n?"".concat(n,"px"):""),t))}},{key:"parseStyle_",value:function(t){var n={};return t?(t.split(";").filter((function(t){return t})).map((function(t){return t.split(":")})).forEach((function(t){var e=t[0].trim(),i=t[1].trim();e&&i&&(n[e]=parseFloat(i)||0)})),n):n}},{key:"open",value:function(t){this.isOpened_||(this.targetElement_=t,this.initialize_(),this.initEvents_(),this.initOpen_())}},{key:"initialize_",value:function(){var t=this;if(!this.dropdownContainer_){var n=this.element;this.dropdownContainer_=document.createElement("div"),SPZCore.Dom.realChildElements(n).forEach((function(n){t.dropdownContainer_.appendChild(n)})),this.dropdownContainer_.classList.add("i-spzhtml-dropdown-container"),n.appendChild(this.dropdownContainer_)}}},{key:"initEvents_",value:function(){var t=this;this.isInitEvent_||(SPZUtils.Event.listen(this.win,"click",(function(n){t.isOpened_&&!t.isInDropdownOrChild_(n.target)&&t.close()})),this.isIos_&&SPZUtils.Event.listen(this.win,"touchstart",(function(n){n.preventDefault(),t.isOpened_&&!t.isInDropdownOrChild_(n.target)&&t.close()})),this.isInitEvent_=!0)}},{key:"isInDropdownOrChild_",value:function(t){return!(this.element!==t&&!this.element.contains(t))}},{key:"onAlign_",value:function(){var t=this,n=this.splitPlacementToPoints_(this.placement_),e=window.innerWidth,i=this.overlayStyle_,o=i.left,r=void 0===o?0:o,s=i.top,u=void 0===s?0:s,p=this.dropdownContainer_.getBoundingClientRect(),v=p.height,d=p.width,b=this.targetElement_.getBoundingClientRect(),y=b.height,w=b.width,m=b.x,O=this.targetElement_,S=O.offsetLeft,P=u+O.offsetTop,k=r+S;switch(n[0]){case c:P-=v;break;case a:P+=y}switch(n[1]){case f:break;case l:k-=(d-w)/2,Math.abs(k)>e-m?k=-d+w:k+m<0&&(k=0);break;case h:k-=d-w}this.mutateElement((function(){SPZCore.Dom.setStyles(t.dropdownContainer_,{top:"".concat(P,"px"),left:"".concat(k,"px")})}))}},{key:"splitPlacementToPoints_",value:function(t){var n,e=t.match(/([a-z]*)([A-Z][a-z]*)?/);return[e[1],(null===(n=e[2])||void 0===n?void 0:n.toLowerCase())||l]}},{key:"initOpen_",value:function(){var t=this,n=b,e=d,i=Object.keys(e).map((function(t){return"".concat(t," ").concat(.15,"s ease-out")})).join(",");SPZCore.Dom.setStyle(this.element,"transition",i),SPZCore.Dom.setStyles(this.element,n),SPZCore.Dom.toggle(this.element,!0),this.onAlign_(),this.mutateElement((function(){SPZCore.Dom.setStyles(t.element,e),t.element.setAttribute("open",""),t.isOpened_=!0})),this.triggerEvent_("dropdownOpen")}},{key:"close",value:function(){var t=this;this.isOpened_&&(SPZCore.Dom.setStyles(this.element,b),this.mutateElement((function(){SPZCore.Dom.toggle(t.element,!1),t.element.removeAttribute("open"),t.isOpened_=!1})),this.triggerEvent_("dropdownClose"))}},{key:"triggerEvent_",value:function(t){var n=SPZUtils.Event.create(this.win,"".concat(s,".").concat(t),{});this.action_.trigger(this.element,t,n)}}])&&function(t,n){for(var e=0;e<n.length;e++){var i=n[e];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}(n.prototype,y),Object.defineProperty(n,"prototype",{writable:!1}),S}(t.BaseElement);self.SPZ.registerElement(s,y,"spz-dropdown{display:none;position:absolute!important;top:0;left:0;width:100%;z-index:1050}spz-dropdown[auto-orientation]{z-index:10;top:auto;left:auto;bottom:auto;right:auto;width:unset}.i-spzhtml-dropdown-container{z-index:1050;position:absolute;background-color:#fff}\n/*# sourceURL=/extensions/spz-dropdown/0.1/spz-dropdown.css*/")}()}});